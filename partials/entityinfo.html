<div class="entityinfo-panel-content">
    <div id="entityinfo-content">
        <div id="no-selection-message" style="padding: 20px; text-align: center; color: #999;">
            <p data-i18n="entityinfo.noSelection">Click a node to view details</p>
        </div>

        <div id="node-details" style="display: none;">
            <!-- Selected Node Information -->
            <div style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                <h4 data-i18n="entityinfo.selectedNode" style="margin: 0 0 10px 0; color: #555; font-size: 14px;">
                    Selected Node</h4>
                <div id="selected-node-info">
                    <!-- Populated dynamically -->
                </div>
            </div>

            <!-- Connected Nodes -->
            <div style="margin-bottom: 20px;">
                <h4 data-i18n="entityinfo.connectedNodes" style="margin: 0 0 10px 0; color: #555; font-size: 14px;">
                    Connected Nodes</h4>
                <div id="connected-nodes-list">
                    <!-- Populated dynamically -->
                </div>
            </div>
        </div>
    </div>

    <script>
        (function () {
            // Listen for node selection events
            $(document).on('nodeSelected', function (e, nodeData) {
                if (!nodeData) {
                    $('#no-selection-message').show();
                    $('#node-details').hide();
                    return;
                }

                $('#no-selection-message').hide();
                $('#node-details').show();

                // Display selected node information
                var nodeInfoHtml = '<div style="font-size: 13px;">';
                nodeInfoHtml += '<div style="margin-bottom: 8px;"><strong data-i18n="entityinfo.nodeId">Node ID:</strong> <span style="color: #007bff;">' + (nodeData.id || 'N/A') + '</span></div>';
                nodeInfoHtml += '<div style="margin-bottom: 8px;"><strong data-i18n="entityinfo.nodeType">Type:</strong> ' + (nodeData.type || 'N/A') + '</div>';

                // Add any additional properties
                if (nodeData.label) {
                    nodeInfoHtml += '<div style="margin-bottom: 8px;"><strong>Label:</strong> ' + nodeData.label + '</div>';
                }

                nodeInfoHtml += '</div>';
                $('#selected-node-info').html(nodeInfoHtml);

                // Display connected nodes
                var connectedHtml = '';
                if (nodeData.connectedNodes && nodeData.connectedNodes.length > 0) {
                    connectedHtml += '<div style="max-height: 300px; overflow-y: auto;">';
                    nodeData.connectedNodes.forEach(function (conn) {
                        connectedHtml += '<div style="padding: 10px; margin-bottom: 8px; background: #fff; border: 1px solid #e0e0e0; border-radius: 4px; font-size: 12px;">';
                        connectedHtml += '<div style="margin-bottom: 4px;"><strong>' + (conn.nodeLabel || conn.nodeId) + '</strong></div>';
                        connectedHtml += '<div style="color: #666; font-size: 11px;"><span data-i18n="entityinfo.relationship">Relationship:</span> ' + (conn.relationship || 'N/A') + '</div>';
                        connectedHtml += '<div style="color: #999; font-size: 11px;">ID: ' + conn.nodeId + '</div>';
                        connectedHtml += '</div>';
                    });
                    connectedHtml += '</div>';
                } else {
                    connectedHtml = '<div style="padding: 15px; text-align: center; color: #999; font-size: 12px;">No connected nodes</div>';
                }
                $('#connected-nodes-list').html(connectedHtml);

                // Re-apply translations
                if (window.i18n && window.i18n.applyLanguage) {
                    window.i18n.applyLanguage(window.i18n.currentLang);
                }
            });
        })();
    </script>
</div>